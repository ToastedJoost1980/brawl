<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Brawl Stars Nightmare - 3v3</title>
<link rel="apple-touch-icon" href="icon.png">

<style>
body {
    font-family: Arial, sans-serif;
    background: #0e0e0e;
    color: #eee;
    font-size: 50px;
    padding: 15px;
}
input, select {
    padding: 20px;
    font-size: 40px;
    margin: 10px 0;
    width: 400px;
}
#result {
    margin-top: 20px;
    font-size: 50px;
    color: #00ff99;
    white-space: pre-line;
}
select {
    height: 300px; /* scrollable area for select */
}
</style>
</head>

<body>

<p>Select map type:</p>
<select id="mapType">
    <option value="open">Open Map</option>
    <option value="closed">Closed Map</option>
</select><br><br>

<p>Select the enemy team:</p>

<!-- Enemy 1 -->
<input type="text" id="enemy1Input" placeholder="Type brawler name..." oninput="filterBrawlers(this, 'enemy1Select')"><br>
<select id="enemy1Select" size="10" onchange="updateDropdowns(); suggest()"></select><br>

<!-- Enemy 2 -->
<input type="text" id="enemy2Input" placeholder="Type brawler name..." oninput="filterBrawlers(this, 'enemy2Select')"><br>
<select id="enemy2Select" size="10" onchange="updateDropdowns(); suggest()"></select><br>

<!-- Enemy 3 -->
<input type="text" id="enemy3Input" placeholder="Type brawler name..." oninput="filterBrawlers(this, 'enemy3Select')"><br>
<select id="enemy3Select" size="10" onchange="updateDropdowns(); suggest()"></select><br>

<div id="result"></div>

<script>
// === VERIFIED 98 BRAWLERS ===
const brawlers = [
"None",
  "8-Bit",
  "Alli",
  "Amber",
  "Angelo",
  "Ash",
  "Barley",
  "Bea",
  "Belle",
  "Berry",
  "Bibi",
  "Bo",
  "Bonnie",
  "Brock",
  "Bull",
  "Buster",
  "Buzz",
  "Byron",
  "Carl",
  "Charlie",
  "Chester",
  "Chuck",
  "Clancy",
  "Colette",
  "Colt",
  "Cordelius",
  "Crow",
  "Darryl",
  "Doug",
  "Draco",
  "Dynamike",
  "Edgar",
  "El Primo",
  "EMZ",
  "Eve",
  "Fang",
  "Finx",
  "Frank",
  "Gale",
  "Gene",
  "Gigi",
  "Gray",
  "Griff",
  "Grom",
  "Gus",
  "Hank",
  "Jacky",
  "Jae-Yong",
  "Janet",
  "Jessie",
  "Juju",
  "Kaze",
  "Kenji",
  "Kit",
  "Larry & Lawrie",
  "Leon",
  "Lily",
  "Lola",
  "Lou",
  "Lumi",
  "Maisie",
  "Mandy",
  "Max",
  "Meg",
  "Meeple",
  "Melodie",
  "Mico",
  "Mina",
  "Mortis",
  "Mr. P",
  "Nani",
  "Nita",
  "Ollie",
  "Otis",
  "Pam",
  "Pearl",
  "Penny",
  "Pierce",
  "Piper",
  "Poco",
  "R-T",
  "Rico",
  "Rosa",
  "Ruffs",
  "Sam",
  "Sandy",
  "Shade",
  "Shelly",
  "Shock",
  "Spike",
  "Sprout",
  "Squeak",
  "Stu",
  "Surge",
  "Tara",
  "Tick",
  "Trunk",
  "Willow",
  "Ziggy"
];

// === ROLE DEFINITIONS (1 role per brawler) ===
// === MID / CENTER BRAWLERS ===
const MID_BRAWLERS = [
  "8-Bit",
  "Amber",
  "Ash",
  "Barley",
  "Belle",
  "Bo",
  "Byron",
  "Crow",
  "Darryl",
  "Doug",
  "EMZ",
  "Eve",
  "Finx",
  "Gene",
  "Gigi",
  "Gray",
  "Griff",
  "Grom",
  "Gus",
  "Janet",
  "Juju",
  "Kit",
  "Lily",
  "Lola",
  "Lou",
  "Lumi",
  "Maisie",
  "Mandy",
  "Max",
  "Meg",
  "Meeple",
  "Melodie",
  "Mico",
  "Mr. P",
  "Nani",
  "Pam",
  "Poco",
  "R-T",
  "Sandy",
  "Spike",
  "Tara",
  "Willow",
  "Ziggy"
];

// === LANE BRAWLERS ===
const LANE_BRAWLERS = [
  "Alli",
  "Angelo",
  "Bea",
  "Berry",
  "Bibi",
  "Bonnie",
  "Brock",
  "Buzz",
  "Carl",
  "Charlie",
  "Chester",
  "Chuck",
  "Clancy",
  "Colette",
  "Colt",
  "Cordelius",
  "Draco",
  "Dynamike",
  "Edgar",
  "El Primo",
  "Fang",
  "Frank",
  "Gale",
  "Hank",
  "Jacky",
  "Jessie",
  "Kenji",
  "Kaze",
  "Larry & Lawrie",
  "Leon",
  "Nita",
  "Ollie",
  "Otis",
  "Pearl",
  "Penny",
  "Pierce",
  "Piper",
  "Rico",
  "Rosa",
  "Ruffs",
  "Sam",
  "Shade",
  "Shelly",
  "Shock",
  "Sprout",
  "Squeak",
  "Stu",
  "Surge",
  "Tick",
  "Trunk"
];

// === UTILITY FUNCTIONS ===
function getRole(brawler) {
    const name = brawler.toLowerCase();
    if (MID_BRAWLERS.map(b=>b.toLowerCase()).includes(name)) return "Center";
    if (LANE_BRAWLERS.map(b=>b.toLowerCase()).includes(name)) return "Lane";
    return "Flex";
}

// Populate all select elements initially
["enemy1Select","enemy2Select","enemy3Select"].forEach(id => {
    const select = document.getElementById(id);
    brawlers.forEach(b => {
        const opt = document.createElement("option");
        opt.value = b.toLowerCase();
        opt.textContent = b;
        select.appendChild(opt);
    });
});

// === Filter function for autocomplete input ===
function filterBrawlers(input, selectId){
    const filter = input.value.toLowerCase();
    const select = document.getElementById(selectId);
    const selected = new Set([enemy1Select.value, enemy2Select.value, enemy3Select.value]);

    select.innerHTML = "";
    brawlers.forEach(b => {
        const val = b.toLowerCase();
        if (b.toLowerCase().includes(filter) && (!selected.has(val) || val === select.value)) {
            const opt = document.createElement("option");
            opt.value = val;
            opt.textContent = b;
            select.appendChild(opt);
        }
    });
}

// === Prevent duplicate selections ===
function updateDropdowns() {
    filterBrawlers(enemy1Input,'enemy1Select');
    filterBrawlers(enemy2Input,'enemy2Select');
    filterBrawlers(enemy3Input,'enemy3Select');
}

// === Suggestion logic (simplified example, you can expand) ===
function suggest() {
    const enemies = [enemy1Select.value, enemy2Select.value, enemy3Select.value];
    const mapType = document.getElementById("mapType").value;

    let picks = new Set();

    function addPick(b) {
        if (!picks.has(b)) picks.add(b);
    }

    enemies.forEach(enemy=>{
        if(!enemy || enemy==="none") return;

        if(["edgar","mortis","fang","sam"].includes(enemy)) {
            addPick("Shelly");
            addPick("Gale");
            addPick("Otis");
        }
        else if(["frank","bull","el primo","rosa","jacky","hank","clancy"].includes(enemy)) {
            addPick("Colette");
            addPick("Spike");
            addPick("Shelly");
            addPick("Rico");
        }
        else if(enemy==="emz") {
            if(mapType!=="closed") { addPick("Piper"); addPick("Belle"); }
            else { addPick("Mortis"); addPick("Spike"); addPick("Shelly"); }
        }
    });

    // Ensure at least 3 picks
    while(picks.size<3){
        brawlers.forEach(b=>{ if(picks.size<3) addPick(b); });
    }

    document.getElementById("result").innerText =
        "Recommended Picks:\n• " + [...picks].map(b=>`${b} (${getRole(b)})`).join("\n• ");
}

// === Init ===
window.onload = ()=>{
    updateDropdowns();
    suggest();
};

// Auto-update on change
["enemy1Select","enemy2Select","enemy3Select","mapType"].forEach(id=>{
    document.getElementById(id).addEventListener("change", ()=>{
        updateDropdowns();
        suggest();
    });
});
</script>

</body>
</html>
